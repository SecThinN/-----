自说自话 TDD
========================

#1、从代码风格说起#
从VB（不是VB.Net，那个时代还有一个奇迹就是 Power Builder）盛行开始，窗体就是代码的全部。初学者常常习惯把所有代码都放到窗体事件中，能够写几个类的就算是高手了。当时几乎所有的教程都是这样叫人写程序的，从Hello World 开始就如此。
那么这种风格也是一种风格，即界面驱动的开发方式，这样做非常符合人的直觉。
有人把人机交互界面驱动的开发方式提升到方法论的高度，认为和这是一种和用户沟通的主要手段。殊不知，这里的“用户” 只是用户代表，也许是甲方领导，也许是个别业务负责人，也许只是个实习生。
用户这个词在IT界很受推崇，那到底谁是用户呢？和人民的概念很类似，用户是一个开放集合的概念，用户集合和被使用的主体（即程序）也是相互依存的。比如，昨天你还不是微信的用户，今天你安装了微信，那么微信的用户群体中就多了一个人，那么昨天你是不是用户呢？
再比如说，我虽然没有IPhone手机，但是不影响我劝别人买，也不影响我吐槽，更不影响我帮人家刷个IOS7，从这个意义上说，我比很多手里拿着IPhone的人更像个“用户”。

还是回过头来说说测试吧。
既然是界面驱动，那么测试手段就是把界面上所有的功能都用鼠标点一遍，出了错误再单步调试。
好了，问题出来了，在稍微复杂一些的应用中，测试环节是最低效的环节，还会引发开发部门和测试部门的矛盾。
其实开发人员也没有什么底气，不敢说代码一点问题也没有，只是强调要如何如何使用才是正确的。
这样的代码风格当然无从说起，非常凌乱，由于业务封装需要很强大的开发，所以通常会交给专门的团队开发，封装好了再给项目用，当时最盛行的是各种控件，而且控件越来越复杂。

还好，软件行业还是在一直进步的，而且一直自己要求进步。

MVC 来了（我第一次认识MVC是从Java的界面设计开始的，大约是1997年），所有程序都可以如是进行拆解，结构精巧而且清晰。
设计模式中不认为MVC是一种设计模式，认为MVC是一种代码组织方式，不限于OO设计，可以适用于多种层次。
MVC带来的好处是，可以独立开发控制功能和数据模型，甚至没有界面的时候就可以独立运行和测试Model和Control 的组合功能。
虽然MVC对领域模型的解构直接带来的好处就是把业务模型从界面逻辑中拆分处理，使每个部分可以单独存在，但是并没有针对单元测试进行的优化。

开发模式前进的动力来自组织内的分工，精细化的分工要求知识和业务相对完整和独立，无限细分不一定带来生产力的提高，反而增加了沟通成本和形成复杂冗余的设计。


>- [引子](引子.md)
- [1、从代码风格说起](1.从代码风格说起.md)
- [2、解构的目标](2.解构的目标.md)
- [3、稳固的中间层](3.稳固的中间层.md)
- [4、BO的TDD](4.BO的TDD.md)
- 未完待续

> Written with [StackEdit](https://stackedit.io/).